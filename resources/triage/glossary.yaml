# Price Intelligence Assistant - Glossary and Tool Mapping

entities:
  GTIN:
    name: "Global Trade Item Number"
    description: "International identifier for trade items; always 14 digits when zero-padded."
    patterns:
      - "\\b\\d{12,14}\\b"
    examples: ["05000123456789"]
    synonyms: ["barcode", "ean", "upc"]
    type: "product_id"
    zero_pad_length: 14

  TPNB:
    name: "Tesco Product Number - Base"
    description: "Internal product identifier; always 9 digits when zero-padded."
    patterns:
      - "\\b\\d{6,10}\\b"
    examples: ["1234567"]
    synonyms: ["product id", "sku"]
    type: "product_id"
    zero_pad_length: 9

  LocationCluster:
    name: "Location Cluster"
    description: "Group of stores/locations treated as a unit for operations."
    patterns: []
    examples:
      - "Large Store England"
      - "Express Scotland"
      - "ROI National"
    synonyms: ["region", "area", "store cluster"]
    type: "location_group"
    mapping:
      "Large Store England": "aec7c8db-013d-414d-bbdd-9226ed96d6fc"
      "Large Store Scotland": "05e7673f-b28d-491a-82b4-08a836112e2a"
      "Large Store Wales": "967badfc-9889-4b4b-b7e9-3e30e55316e7"
      "Large Store Northern Ireland": "36787780-018d-4555-80f0-d1d66ff5fa5b"
      "Express England": "f6458c43-25c0-4c24-935f-4f284041d573"
      "Express Scotland": "f9a5d04f-5980-4a0a-9ee4-5af726962f9e"
      "Express Wales": "fdf0c7e6-15b4-49ee-ace2-1086bbd1d79c"
      "Express Northern Ireland": "4cca015b-8fcb-4d36-a33b-92fc3fdf5402"
      "Express Isle of Man": "e87ba962-61fb-45b0-aa93-c28696c89808"
      "Whoosh England": "5b95799f-773a-43bf-ba73-40179a29d56a"
      "Whoosh Scotland": "be3bc0c9-4252-4bb7-bf6d-cca84102ac3d"
      "Whoosh Wales": "41da8745-3204-493d-951b-5ec1dbebb80a"
      "Whoosh Northern Ireland": "9f60aa92-0b9c-4512-8f07-86a44454eb2a"
      "Premium/Metro": "041fece7-aa93-42c6-9e76-72a43f599498"
      "ROI Express": "48973981-9008-48ed-8571-b2d708f135d0"
      "ROI National": "0adead7a-5d32-4efe-99d9-8aa9746cda3c"

extraction_hints:
  - "Prefer explicit labels near numbers (e.g., 'GTIN: 0500â€¦')."
  - "Disambiguate numeric identifiers by expected length and context words."
  - "Map natural language location names to cluster UUID via mapping."

tool_selection:
  mapping:
    price:
      tool: "base_prices_get"
      requires: ["tpnb", "locationClusterId"]
    minimum_price_get:
      tool: "price_minimum_get"
      requires: ["gtin", "locationClusterId"]
    minimum_price_calculate:
      tool: "price_minimum_calculate"
      requires: ["gtin", "locationClusterIds", "qtyContents.totalQuantity", "qtyContents.quantityUom", "taxTypeCode", "supplierABV"]
    basket_segment:
      tool: "basket_segment_get"
      requires: ["tpnb", "locationClusterId", "subClass"]
    competitor_prices:
      tool: "competitor_prices_get"
      requires: ["tpnb", "locationClusterIds"]
    competitor_promotional_prices:
      tool: "competitor_promotional_prices_get"
      requires: ["tpnbs", "locationClusterIds"]
    promotion_effectiveness:
      tool: "promo_effectiveness_get"
      requires: ["tpnbs", "locationClusterIds"]
    policies_search:
      tool: "policies_view"
      optional: ["tpnb", "locationCluster", "policyType"]



